<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<link rel="import" href="../neon-animation/neon-animations.html">
<link rel="import" href="grow-height-animation.html">
<link rel="import" href="../../bower_components/neon-animation/web-animations.html">

<dom-module id="boo-searcher">
  <template>
    <style>
      :host {
        display: inline-block;
        margin: 1em;
      }
    </style>

    <input type="text" />

    <iron-dropdown id="dropdown"
      opened={{opened}}
      vertical-align="[[verticalAlign]]"
      horizontal-align="[[horizontalAlign]]"
      vertical-offset="[[verticalOffset]]"
      horizontal-offset="[[HorizontalOffset]]"
      disabled="[[disabled]]"
      scroll-action="[[scrollAction]]"
      open-animation-config="[[openAnimationConfig]]"
      close-animation-config="[[closeAnimationConfig]]">
      <slot name="dropdown-content" slot="dropdown-content"></slot>
    </iron-dropdown>
  </template>
  <script>
  (() => {
    var config = {
      ANIMATION_CUBIC_BEZIER: 'cubic-bezier(.3,.95,.5,1)',
      MAX_ANIMATION_TIME_MS: 400
    };
    class BooSearcher extends Polymer.Element {
      static get is() { return 'boo-searcher'; }
      static get properties() {
        return {
          verticalAlign: String,
          horizontalAlign: String,
          opened: Boolean,
          disabled: Boolean,
          scrollAction: String,
          HorizontalOffset: Number,
          verticalOffset: Number,
          openAnimationConfig: {
            type: Array,
            value: function() {
              return [{
                name: 'fade-in-animation',
                timing: {
                  delay: 100,
                  duration: 200
                }
              }, {
                name: 'search-dropdown-grow-width-animation',
                timing: {
                  delay: 100,
                  duration: 150,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }, {
                name: 'search-dropdown-grow-height-animation',
                timing: {
                  delay: 100,
                  duration: 275,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }];
            }
          },
          closeAnimationConfig: {
            type: Array,
            value: function() {
              return [{
                name: 'fade-out-animation',
                timing: {
                  duration: 150
                }
              }, {
                name: 'search-dropdown-shrink-width-animation',
                timing: {
                  delay: 100,
                  duration: 50,
                  easing: config.ANIMATION_CUBIC_BEZIER
                }
              }, {
                name: 'search-dropdown-shrink-height-animation',
                timing: {
                  duration: 200,
                  easing: 'ease-in'
                }
              }];
            }
          }
        };
      }

      open() {
        this.shadowRoot.querySelector('iron-dropdown').open();
      }
    }

    window.customElements.define(BooSearcher.is, BooSearcher);
  })();
  </script>
</dom-module>
