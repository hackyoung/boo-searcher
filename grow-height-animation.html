<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../neon-animation/neon-animation-behavior.html">

<script>
(() => {

  let behaviors = [Polymer.NeonAnimationBehavior];

  let BaseAnimation = Polymer.mixinBehaviors(behaviors, Polymer.Element);

  class SearchDropdownGrowHeightAnimation extends BaseAnimation {
    static get is() { return 'search-dropdown-grow-height-animation'; }

    configure(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var height = rect.height;

      this._effect = new KeyframeEffect(node, [{
        height: (height / 2) + 'px'
      }, {
        height: height + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  }
  window.customElements.define(
    SearchDropdownGrowHeightAnimation.is,
    SearchDropdownGrowHeightAnimation
  );

  class SearchDropdownGrowWidthAnimation extends BaseAnimation {

    static get is() { return 'search-dropdown-grow-width-animation'; }

    configure(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var width = rect.width;

      this._effect = new KeyframeEffect(node, [{
        width: (width / 2) + 'px'
      }, {
        width: width + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  }
  window.customElements.define(
    SearchDropdownGrowWidthAnimation.is,
    SearchDropdownGrowWidthAnimation
  );

  class SearchDropdownShrinkWidthAnimation extends BaseAnimation {
    static get is() { return 'search-dropdown-shrink-width-animation'; }

    configure(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var width = rect.width;

      this._effect = new KeyframeEffect(node, [{
        width: width + 'px'
      }, {
        width: width - (width / 20) + 'px'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  }
  window.customElements.define(
    SearchDropdownShrinkWidthAnimation.is,
    SearchDropdownShrinkWidthAnimation
  );
  class SearchDropdownShrinkHeightAnimation extends BaseAnimation {
    static get is() { return 'search-dropdown-shrink-height-animation'; }

    configure(config) {
      var node = config.node;
      var rect = node.getBoundingClientRect();
      var height = rect.height;
      var top = rect.top;

      this.setPrefixedProperty(node, 'transformOrigin', '0 0');

      this._effect = new KeyframeEffect(node, [{
        height: height + 'px',
        transform: 'translateY(0)'
      }, {
        height: height / 2 + 'px',
        transform: 'translateY(-20px)'
      }], this.timingFromConfig(config));

      return this._effect;
    }
  }
  window.customElements.define(
    SearchDropdownShrinkHeightAnimation.is,
    SearchDropdownShrinkHeightAnimation
  );

})();

</script>
